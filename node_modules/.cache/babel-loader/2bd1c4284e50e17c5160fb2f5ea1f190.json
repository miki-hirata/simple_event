{"ast":null,"code":"import _slicedToArray from\"/home/tangra/linux-workspace/react/simple_event/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import\"./css/style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Form(props){var events=props.events,changeFilter=props.changeFilter;////重複しているイベント名は選択肢に入れない////\nvar eventTitle=events.map(function(event){////イベントタイトルだけ取得（オブジェクト→配列）\nreturn event.title;});var setTitle=new Set(eventTitle);//重複削除\nvar optionTitle=Array.from(setTitle);//配列に戻す\n////この関数が実行されたら、表示されるイベントが変わる////\nfunction handleSubmit(event){event.preventDefault();//これがないと本当にリロードしちゃう\nvar selectedEvent=event.target.elements.selectedEvent;console.log(selectedEvent.value);//選択したイベントのタイトル取得確認できている\nprops.changeFilter(selectedEvent.value);}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"select_box\",children:/*#__PURE__*/_jsxs(\"select\",{name:\"selectedEvent\",defaultValue:events[0].title,children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u5168\\u3066\\u306E\\u516C\\u6F14\"},\"all\"),optionTitle.map(function(title){return/*#__PURE__*/_jsx(\"option\",{value:title,children:title},title);})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"select_btn\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button is-dark\",children:\"Reload\"})})]});}function Header(props){var events=props.events,changeFilter=props.changeFilter;return/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u7C21\\u6613\\u30A4\\u30D9\\u30F3\\u30C8\\u8868\\u793A\"}),/*#__PURE__*/_jsx(Form,{events:events,changeFilter:changeFilter})]});}function Event(props){return/*#__PURE__*/_jsxs(\"div\",{className:\"event_block\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"num\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"No.\"}),/*#__PURE__*/_jsx(\"span\",{children:props.id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"date\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"11\"}),/*#__PURE__*/_jsx(\"span\",{children:\"/\"}),/*#__PURE__*/_jsx(\"span\",{children:\"4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time\",children:[/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"open\"}),/*#__PURE__*/_jsx(\"dd\",{children:\"16:30\"})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"start\"}),/*#__PURE__*/_jsx(\"dd\",{children:\"18:30\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(\"span\",{children:props.title})})}),/*#__PURE__*/_jsx(\"div\",{className:\"place\",children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{children:props.place})})})]},props.id);}function Main(props){var events=props.events;return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"section\",{className:\"event_section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main_width\",children:/*#__PURE__*/_jsx(\"div\",{className:\"event_group\",children:events.map(function(event){return/*#__PURE__*/_jsx(Event,{id:event.id,title:event.title,place:event.place});})})})})});}function App(){var events=[{id:1,title:\"鼓童ワン・アース・ツアー 童\",place:\"新潟県民会館\"},{id:2,title:\"鼓童ワン・アース・ツアー 巡\",place:\"神奈川県民会館\"},{id:3,title:\"鼓童ワン・アース・ツアー 鼓\",place:\"石川県民会館\"},{id:4,title:\"鼓童ワン・アース・ツアー 打男\",place:\"埼玉県民会館\"},{id:5,title:\"鼓童ワン・アース・ツアー 鼓\",place:\"福島県民会館\"}];////公演名でのソート////\nvar _useState=useState(events),_useState2=_slicedToArray(_useState,2),filteredEvents=_useState2[0],setFilteredEvents=_useState2[1];var filterTitle=null;//const [filterTitle, setfilterTitle] = useState(null);\n//下の方が良いような気がするけど、結果がずれてしまう\nfunction settingFilterTitle(e){return new Promise(function(resolve,reject){filterTitle=e;resolve('成功');});}function changeFilter(e){if(e==\"all\"){//全てを選ぶとき\nsetFilteredEvents(events);return;//ここで関数を終わらせる（入れないと公演が表示されなくなる）\n}settingFilterTitle(e).then(function(f){console.log(f);setFilteredEvents(events.filter(//実際のフィルタリング\nfunction(event){return event.title==filterTitle;}));});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{events:events,changeFilter:changeFilter}),/*#__PURE__*/_jsx(Main,{events:filteredEvents})]});}export default App;","map":{"version":3,"sources":["/home/tangra/linux-workspace/react/simple_event/src/App.js"],"names":["useEffect","useState","Form","props","events","changeFilter","eventTitle","map","event","title","setTitle","Set","optionTitle","Array","from","handleSubmit","preventDefault","selectedEvent","target","elements","console","log","value","Header","Event","id","place","Main","App","filteredEvents","setFilteredEvents","filterTitle","settingFilterTitle","e","Promise","resolve","reject","then","f","filter"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./css/style.css\"\n\nfunction Form(props) {\n  const {events, changeFilter}= props;\n  \n  ////重複しているイベント名は選択肢に入れない////\n  const eventTitle = events.map((event) => {////イベントタイトルだけ取得（オブジェクト→配列）\n    return (\n      event.title\n    );\n  })\n  const setTitle = new Set(eventTitle);//重複削除\n  const optionTitle = Array.from(setTitle);//配列に戻す\n\n  ////この関数が実行されたら、表示されるイベントが変わる////\n  function handleSubmit(event) {\n    event.preventDefault();//これがないと本当にリロードしちゃう\n    const { selectedEvent } = event.target.elements;\n    console.log(selectedEvent.value);//選択したイベントのタイトル取得確認できている\n    props.changeFilter(selectedEvent.value);\n  }\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"select_box\">\n        <select name=\"selectedEvent\" defaultValue={events[0].title}>\n        <option  key=\"all\" value=\"all\">全ての公演</option>\n          {optionTitle.map((title) => {\n\n            return (\n              <option  key={title} value={title}>{title}</option>\n            );\n          })}\n        </select>\n      </div>\n      <div className=\"select_btn\">\n        <button type=\"submit\" className=\"button is-dark\">\n           Reload\n        </button>\n      </div>\n    </form>\n  );\n}\n\n\nfunction Header(props){\n  const {events, changeFilter} = props;\n  return(\n    <header>\n        <h1>簡易イベント表示</h1>\n        <Form events={events} changeFilter={changeFilter}/>\n    </header>\n  );\n}\n\nfunction Event(props){\n  return(\n    <div key={props.id} className=\"event_block\">\n      <div className=\"num\">\n        <span>No.</span>\n        <span>{props.id}</span>\n      </div>\n      <div className=\"date\">\n        <span>11</span>\n        <span>/</span>\n        <span>4</span>\n      </div>{/* date */}\n      <div className=\"time\">\n        <dl>\n          <dt>open</dt>\n          <dd>16:30</dd>\n        </dl>\n        <dl>\n          <dt>start</dt>\n          <dd>18:30</dd>\n        </dl>\n      </div>{/* date */}\n      <div className=\"title\">\n        <h2><span>{props.title}</span></h2>\n      </div>{/* title */}\n      <div className=\"place\">\n        <p><span>{props.place}</span></p>\n      </div>{/* place */}\n    </div>\n  );\n}\n\nfunction Main(props){\n  const {events} = props;\n  return(\n    <main>\n      <section className=\"event_section\">\n        <div className=\"main_width\">\n          <div className=\"event_group\">\n            \n            {events.map((event) => {\n              return (\n                <Event id={event.id} title={event.title} place={event.place}/>\n              );\n            })}\n          </div>{/* event_group */}\n        </div>{/* main_width */}\n      </section>\n    </main>\n  );\n}\n\nfunction App() {\n  const events = [\n    {id: 1, title: \"鼓童ワン・アース・ツアー 童\", place: \"新潟県民会館\"},\n    {id: 2, title: \"鼓童ワン・アース・ツアー 巡\", place: \"神奈川県民会館\"},\n    {id: 3, title: \"鼓童ワン・アース・ツアー 鼓\", place: \"石川県民会館\"},\n    {id: 4, title: \"鼓童ワン・アース・ツアー 打男\", place: \"埼玉県民会館\"},\n    {id: 5, title: \"鼓童ワン・アース・ツアー 鼓\", place: \"福島県民会館\"},\n  ];\n\n  ////公演名でのソート////\n\n  const [filteredEvents, setFilteredEvents] = useState(events);\n  let filterTitle = null;\n  //const [filterTitle, setfilterTitle] = useState(null);\n  //下の方が良いような気がするけど、結果がずれてしまう\n  \n  function settingFilterTitle(e) {\n    return new Promise(function(resolve, reject) {\n      filterTitle = e;\n      resolve('成功');\n    })\n  }\n\n  function changeFilter(e) {\n    if(e == \"all\"){//全てを選ぶとき\n      setFilteredEvents(events)\n      return;//ここで関数を終わらせる（入れないと公演が表示されなくなる）\n    }\n    settingFilterTitle(e).then(\n      function(f) {\n        console.log(f);\n        setFilteredEvents((events.filter(//実際のフィルタリング\n          (event) => {\n            return event.title == filterTitle;\n          }\n        )))\n      }\n    )\n  }\n\n  return (\n    <div>\n      <Header events = {events} changeFilter={changeFilter}/>\n      <Main events = {filteredEvents} />\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}